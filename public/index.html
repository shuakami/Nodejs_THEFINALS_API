<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THEFINALS API</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ®</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">THEFINALS API</h1>
            <p class="subtitle">ç®€å•ã€å¯é çš„æ¸¸æˆæ•°æ®æŸ¥è¯¢æœåŠ¡</p>
        </header>

        <main class="content">
            <section>
                <h2>ä¸–ç•Œå·¡å›èµ›</h2>
                <div class="endpoint">
                    <div class="endpoint-url">GET /leaderboard/{season}worldtour/{platform}</div>
                    <div class="endpoint-desc">æŸ¥è¯¢ç©å®¶ä¸–ç•Œå·¡å›èµ›æ•°æ® (æ”¯æŒ s3-s5 èµ›å­£)</div>
                </div>
            </section>

            <section>
                <h2>æ’ä½ç³»ç»Ÿ</h2>
                <div class="endpoint">
                    <div class="endpoint-url">GET /leaderboard/{season}</div>
                    <div class="endpoint-desc">æŸ¥è¯¢æ—©æœŸèµ›å­£æ’ä½æ•°æ® (cb1, cb2)</div>
                </div>
                <div class="endpoint">
                    <div class="endpoint-url">GET /leaderboard/{season}/{platform}</div>
                    <div class="endpoint-desc">æŸ¥è¯¢å½“å‰èµ›å­£æ’ä½æ•°æ® (ob, s1-s5)</div>
                </div>
            </section>

            <section>
                <h2>ç³»ç»ŸçŠ¶æ€</h2>
                <div class="endpoint">
                    <div class="endpoint-url">GET /health</div>
                    <div class="endpoint-desc">æ£€æŸ¥ API æœåŠ¡è¿è¡ŒçŠ¶æ€</div>
                </div>
            </section>

            <section class="test-area">
                <h2>API æµ‹è¯•</h2>
                <div class="test-examples">
                    <button class="example-btn" data-path="/health">æµ‹è¯•å¥åº·æ£€æŸ¥</button>
                    <button class="example-btn" data-path="/leaderboard/s5/crossplay">æµ‹è¯•S5æ’ä½</button>
                    <button class="example-btn" data-path="/leaderboard/s5worldtour/crossplay">æµ‹è¯•S5ä¸–ç•Œå·¡å›èµ›</button>
                </div>
                <div class="test-form">
                    <input type="text" class="test-input" placeholder="è¾“å…¥APIè·¯å¾„ï¼Œä¾‹å¦‚: /leaderboard/s5/crossplay" />
                    <button class="test-button">å‘é€è¯·æ±‚</button>
                </div>
                <div class="test-status"></div>
                <pre class="test-result"></pre>
            </section>
        </main>
    </div>

    <script>
        const testInput = document.querySelector('.test-input');
        const testButton = document.querySelector('.test-button');
        const testResult = document.querySelector('.test-result');
        const testStatus = document.querySelector('.test-status');

        // ç¤ºä¾‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.example-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                testInput.value = btn.dataset.path;
                sendRequest();
            });
        });

        // æµ‹è¯•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        testButton.addEventListener('click', sendRequest);

        // è¾“å…¥æ¡†å›è½¦äº‹ä»¶
        testInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendRequest();
            }
        });

        async function sendRequest() {
            const path = testInput.value.trim();
            
            if (!path) {
                showError('è¯·è¾“å…¥APIè·¯å¾„');
                return;
            }

            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                showStatus('å‘é€è¯·æ±‚ä¸­...');
                testResult.classList.add('visible');

                // å‘é€è¯·æ±‚
                const startTime = Date.now();
                const response = await fetch(path);
                const endTime = Date.now();

                // è·å–å“åº”æ•°æ®
                const data = await response.json();

                // æ˜¾ç¤ºå“åº”çŠ¶æ€
                const duration = endTime - startTime;
                showStatus(`
                    çŠ¶æ€ç : ${response.status}
                    è€—æ—¶: ${duration}ms
                    æ—¶é—´: ${new Date().toLocaleString()}
                `);

                // æ˜¾ç¤ºå“åº”æ•°æ®
                testResult.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                showError(`è¯·æ±‚å¤±è´¥: ${error.message}`);
            }
        }

        function showStatus(message) {
            testStatus.textContent = message;
            testStatus.className = 'test-status';
            testStatus.classList.add('visible');
        }

        function showError(message) {
            testStatus.textContent = message;
            testStatus.className = 'test-status error';
            testStatus.classList.add('visible');
            testResult.classList.remove('visible');
        }
    </script>
</body>
</html> 